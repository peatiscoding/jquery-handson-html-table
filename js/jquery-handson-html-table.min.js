!function(t){var n=function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return(new Date).getTime()+"-"+t()+t()};t.fn.handsonFromTable=function(e,r){return this.each(function(){if(!t(this).is("table"))throw"Unable to create handsonTable with non-table element.";var a=t("<div>"),o=t(this),l=r||{},s=l.replaceTable&&o.attr("id")||n();a.attr("id",s),a.attr("class",o.attr("class")||""),a.attr("style",o.attr("style")||""),a.addClass("auto-handson-table"),o.parent().append(a);var c=[],i=[],d={x:0,y:0},u=["thead tr","tbody tr","> tr","tfoot tr"].reduce(function(t,n){return null==t?o.find(n).toArray():t.concat(o.find(n).toArray())},null).map(function(n){var e=[];return d.x=0,t(n).find("th, td").each(function(){var n=t(this),r=parseInt(n.attr("colspan"))||1,a=parseInt(n.attr("rowspan"))||1;for(l.verbose&&console.log("Working on: "+[d.y,d.x].join("-"));-1!=i.indexOf([d.y,d.x].join("-"));)l.verbose&&console.log("Blocked cell found on "+d.x+", "+d.y),e.push(""),d.x+=1;for(var o=1;a>o;o++)for(var s=0;r>s;s++){var u=""+(d.y+o)+"-"+(d.x+s);i.push(u),l.verbose&&console.log("add blockedCell "+u)}e.push(n.html());for(var o=1;r>o;o++)e.push("");a+r>2&&c.push({row:d.y,col:d.x,rowspan:a,colspan:r}),d.x+=r}),d.y++,e}),f=t.extend(e,{data:u,mergeCells:c});l.verbose&&console.log(f),new Handsontable(a[0],f),l.replaceTable&&o.remove()})}}(jQuery);